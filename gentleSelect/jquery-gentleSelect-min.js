(function(c){var e={minWidth:100,itemWidth:undefined,columns:undefined,rows:undefined,title:undefined};function f(g){if(typeof g=="undefined"){return false}else{return true}}function a(h,g){if(h.attr("multiple")==true){c.error("Sorry, gentleSelect does not work with multiple=true yet");return true}if(f(g.columns)&&f(g.rows)){c.error("gentleSelect: You cannot supply both 'rows' and 'columns'");return true}if(f(g.columns)&&!f(g.itemWidth)){c.error("gentleSelect: itemWidth must be supplied if 'columns' is specified");return true}if(f(g.rows)&&!f(g.itemWidth)){c.error("gentleSelect: itemWidth must be supplied if 'rows' is specified");return true}return false}var b={init:function(u){var j=c.extend({},e,u);if(a(this,j)){return this}this.hide();var q=c("<span class='gentleselect-label'>"+this.find(":selected").text()+"</span>").insertBefore(this).bind("mouseenter.gentleselect",d.labelHoverIn).bind("mouseleave.gentleselect",d.labelHoverOut).bind("click.gentleselect",d.labelClick).data("root",this);this.data("label",q).data("options",j);var m=c("<ul></ul>");this.find("option").each(function(){var i=c("<li>"+c(this).text()+"</li>").data("value",c(this).attr("value")).data("name",c(this).text()).appendTo(m);if(c(this).attr("selected")){i.addClass("selected")}});var n=c("<div class='gentleselect-dialog'></div>").append(m).insertAfter(q).bind("click.gentleselect",d.dialogClick).bind("mouseleave.gentleselect",d.dialogHoverOut).data("label",q).data("root",this);this.data("dialog",n);if(f(j.columns)||f(j.rows)){m.css("float","left").find("li").width(j.itemWidth).css("float","left");var l=m.find("li:first");var h=j.itemWidth+parseInt(l.css("padding-left"))+parseInt(l.css("padding-right"));var r=m.find("li").length;if(f(j.columns)){var p=parseInt(j.columns);var t=Math.ceil(r/p)}else{var t=parseInt(j.rows);var p=Math.ceil(r/t)}n.width(h*p);for(var k=0;k<(t*p)-r;k++){c("<li style='float:left' class='gentleselect-dummy'><span>&nbsp;</span></li>").appendTo(m)}var g=[];var s=0;m.find("li").each(function(){if(s<t){g[s]=c(this)}else{var i=s%t;c(this).insertAfter(g[i]);g[i]=c(this)}s++})}else{if(typeof j.minWidth=="number"){n.css("min-width",j.minWidth)}}if(f(j.title)){c("<div class='gentleselect-title'>"+j.title+"</div>").prependTo(n)}c(document).bind("keyup.gentleselect",d.keyUp);return this},update:function(){var g=this;var h=this.val();this.data("dialog").find("li").each(function(){if(c(this).data("value")==h){c(this).addClass("selected");g.data("label").text(c(this).data("name"))}else{c(this).removeClass("selected")}});return this}};var d={labelHoverIn:function(){c(this).addClass("gentleselect-label-highlight")},labelHoverOut:function(){c(this).removeClass("gentleselect-label-highlight")},labelClick:function(){var h=c(this).position();var g=c(this).data("root").data("dialog").css("top",h.top+c(this).data("root").height()).css("left",h.left+1).slideDown()},dialogHoverOut:function(){c(this).hide()},dialogClick:function(k){var i=c(k.target);c(this).fadeOut("fast");if(i.is("li")&&!i.hasClass("gentleselect-dummy")){var j=i.data("value");var h=i.data("name");var g=c(this).data("label").text(h);c(this).find("li.selected").removeClass("selected");i.addClass("selected");var l=c(this).data("root").val(j).trigger("change")}},keyUp:function(g){if(g.keyCode==27){c(".gentleselect-dialog").hide()}}};c.fn.gentleSelect=function(g){if(b[g]){return b[g].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof g==="object"||!g){return b.init.apply(this,arguments)}else{c.error("Method "+g+" does not exist on jQuery.gentleSelect")}}}})(jQuery);